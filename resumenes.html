<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Resúmenes y Tareas - Estudio Colectivo UNAL</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link rel="stylesheet" href="material-study.css">
</head>

<body>
    <!-- Barra superior -->
    <header class="md-top-app-bar">
        <div class="md-top-app-bar__row">
            <section class="md-top-app-bar__section">
                <span class="md-top-app-bar__nav-icon" id="menu-toggle">
                    <span class="material-icons">menu</span>
                </span>
                <span class="md-top-app-bar__title">Resúmenes y Tareas</span>
            </section>
            <section class="md-top-app-bar__section--align-end">
                <div class="md-top-app-bar__action-item">
                    <span class="material-icons">notifications</span>
                </div>
                <div class="md-top-app-bar__action-item" id="theme-toggle">
                    <span class="material-icons">dark_mode</span>
                </div>
                <div class="md-top-app-bar__action-item">
                    <div class="md-avatar md-avatar--small">
                        <span>U</span>
                    </div>
                </div>
            </section>
        </div>
    </header>

    <!-- Navegación lateral -->
    <div class="md-drawer" id="nav-drawer">
        <div class="md-drawer__header">
            <div class="md-drawer__title">Estudio Colectivo UNAL</div>
        </div>
        <div class="md-drawer__content">
            <nav class="md-nav-list">
                <a href="dashboard.html" class="md-nav-list__item">
                    <span class="md-nav-list__icon material-icons">dashboard</span>
                    <span class="md-nav-list__text">Dashboard</span>
                </a>
                <a href="grupos.html" class="md-nav-list__item">
                    <span class="md-nav-list__icon material-icons">group</span>
                    <span class="md-nav-list__text">Grupos</span>
                </a>
                <a href="tareas.html" class="md-nav-list__item">
                    <span class="md-nav-list__icon material-icons">assignment</span>
                    <span class="md-nav-list__text">Tareas</span>
                </a>
                <a href="calendario.html" class="md-nav-list__item">
                    <span class="md-nav-list__icon material-icons">calendar_today</span>
                    <span class="md-nav-list__text">Calendario</span>
                </a>
                <a href="resumenes.html" class="md-nav-list__item md-nav-list__item--active">
                    <span class="md-nav-list__icon material-icons">summarize</span>
                    <span class="md-nav-list__text">Resúmenes</span>
                </a>
                <a href="chat.html" class="md-nav-list__item">
                    <span class="md-nav-list__icon material-icons">chat</span>
                    <span class="md-nav-list__text">Chat</span>
                </a>
                <a href="evaluaciones.html" class="md-nav-list__item">
                    <span class="md-nav-list__icon material-icons">assignment_turned_in</span>
                    <span class="md-nav-list__text">Evaluaciones</span>
                </a>
            </nav>
        </div>
    </div>
    <div class="md-drawer__overlay" id="drawer-overlay"></div>

    <!-- Contenido principal -->
    <main class="container md-mt-large">
        <div class="md-layout-grid">
            <!-- Grabaciones y Transcripciones -->
            <div class="md-layout-grid__cell md-layout-grid__cell--span-6-desktop md-layout-grid__cell--span-12-tablet">
                <div class="md-card">
                    <h4 class="md-card__title">
                        <span class="material-icons md-mr-small"
                            style="vertical-align: middle;">record_voice_over</span>
                        Grabaciones y Transcripciones
                    </h4>
                    <div class="md-card__content">
                        <div class="md-list">
                            <div class="md-list__item reunionItem" data-reunion="Reunión de IA - 10/10/2023">
                                <span class="md-list__icon material-icons">mic</span>
                                <div class="md-list__text">
                                    <div class="md-list__primary-text">Reunión de IA</div>
                                    <div class="md-list__secondary-text">10/10/2023</div>
                                </div>
                                <div class="md-list__meta">
                                    <span class="md-chip">
                                        <span class="material-icons" style="font-size: 16px;">schedule</span>
                                        45:20
                                    </span>
                                </div>
                            </div>
                            <div class="md-list__item reunionItem" data-reunion="Reunión de Optimización - 12/10/2023">
                                <span class="md-list__icon material-icons">mic</span>
                                <div class="md-list__text">
                                    <div class="md-list__primary-text">Reunión de Optimización</div>
                                    <div class="md-list__secondary-text">12/10/2023</div>
                                </div>
                                <div class="md-list__meta">
                                    <span class="md-chip">
                                        <span class="material-icons" style="font-size: 16px;">schedule</span>
                                        32:15
                                    </span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="md-card__actions">
                        <button class="md-button md-button--text" id="cargar-todas">
                            <span class="material-icons md-mr-small">view_list</span>
                            Ver todos
                        </button>
                        <button class="md-button md-button--text" id="grabar-nueva">
                            <span class="material-icons md-mr-small">add_circle</span>
                            Grabar nueva
                        </button>
                    </div>
                </div>
            </div>

            <!-- Detalles de la Transcripción -->
            <div class="md-layout-grid__cell md-layout-grid__cell--span-6-desktop md-layout-grid__cell--span-12-tablet">
                <div class="md-card">
                    <h4 class="md-card__title">
                        <span class="material-icons md-mr-small" style="vertical-align: middle;">text_snippet</span>
                        Detalles
                    </h4>
                    <div class="md-card__subtitle" id="titulo-reunion">Selecciona una reunión para ver sus detalles
                    </div>
                    <div class="md-card__content">
                        <div class="md-tabs md-mb-medium">
                            <div class="md-tab md-tab--active" id="tab-transcripcion">Transcripción</div>
                            <div class="md-tab" id="tab-resumen">Resumen</div>
                            <div class="md-tab" id="tab-puntos">Puntos Clave</div>
                        </div>

                        <div id="contenido-transcripcion" class="tab-contenido" style="display: block;">
                            <div class="md-text-field md-mb-medium">
                                <textarea id="transcripcion" class="md-text-field__input" rows="8"
                                    readonly>Transcripción de la reunión seleccionada...</textarea>
                                <label for="transcripcion" class="md-text-field__label">Transcripción completa</label>
                            </div>
                        </div>

                        <div id="contenido-resumen" class="tab-contenido" style="display: none;">
                            <div class="md-text-field md-mb-medium">
                                <textarea id="resumen" class="md-text-field__input" rows="8"
                                    readonly>Resumen de los puntos clave tratados en la reunión...</textarea>
                                <label for="resumen" class="md-text-field__label">Resumen generado</label>
                            </div>
                        </div>

                        <div id="contenido-puntos" class="tab-contenido" style="display: none;">
                            <div class="md-text-field md-mb-medium">
                                <textarea id="puntos-clave" class="md-text-field__input" rows="8" readonly>Puntos clave: 
- Algoritmos de IA 
- Optimización de procesos</textarea>
                                <label for="puntos-clave" class="md-text-field__label">Puntos clave</label>
                            </div>
                        </div>
                    </div>
                    <div class="md-card__actions">
                        <button class="md-button md-button--filled" id="enviar-informe">
                            <span class="material-icons md-mr-small">email</span>
                            Enviar Informe por Email
                        </button>
                        <button class="md-button md-button--outlined" id="descargar-informe">
                            <span class="material-icons md-mr-small">download</span>
                            Descargar
                        </button>
                    </div>
                </div>
            </div>

            <!-- Tareas Pendientes -->
            <div class="md-layout-grid__cell md-layout-grid__cell--span-6-desktop md-layout-grid__cell--span-12-tablet">
                <div class="md-card">
                    <h4 class="md-card__title">
                        <span class="material-icons md-mr-small" style="vertical-align: middle;">checklist</span>
                        Tareas Pendientes
                    </h4>
                    <div class="md-card__content">
                        <div class="md-list">
                            <div class="md-list__item">
                                <div class="md-list__text">
                                    <label class="md-checkbox">
                                        <input type="checkbox" class="md-checkbox__input">
                                        <span class="md-checkbox__box"></span>
                                        <span class="md-checkbox__label">Trabajo de Optimización en IA</span>
                                    </label>
                                </div>
                                <div class="md-list__meta">
                                    <button class="md-button md-button--icon">
                                        <span class="material-icons">more_vert</span>
                                    </button>
                                </div>
                            </div>
                            <div class="md-list__item">
                                <div class="md-list__text">
                                    <label class="md-checkbox">
                                        <input type="checkbox" class="md-checkbox__input">
                                        <span class="md-checkbox__box"></span>
                                        <span class="md-checkbox__label">Presentación de IA</span>
                                    </label>
                                </div>
                                <div class="md-list__meta">
                                    <button class="md-button md-button--icon">
                                        <span class="material-icons">more_vert</span>
                                    </button>
                                </div>
                            </div>
                            <div class="md-list__item">
                                <div class="md-list__text">
                                    <label class="md-checkbox">
                                        <input type="checkbox" class="md-checkbox__input">
                                        <span class="md-checkbox__box"></span>
                                        <span class="md-checkbox__label">Revisar material de estudio</span>
                                    </label>
                                </div>
                                <div class="md-list__meta">
                                    <button class="md-button md-button--icon">
                                        <span class="material-icons">more_vert</span>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="md-card__actions">
                        <button class="md-button md-button--filled" id="agregar-tarea">
                            <span class="material-icons md-mr-small">add</span>
                            Agregar Tarea
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Botón flotante para añadir grabación rápida -->
    <div class="md-fab" id="grabar-rapido">
        <span class="material-icons">mic</span>
    </div>

    <!-- Diálogo para agregar nueva tarea -->
    <div class="md-dialog-container" id="modalNuevaTareaContainer">
        <div class="md-dialog-overlay"></div>
        <div class="md-dialog">
            <div class="md-dialog__header">
                <h3 class="md-dialog__title">Agregar Nueva Tarea</h3>
            </div>
            <div class="md-dialog__content">
                <form id="formNuevaTarea">
                    <div class="md-text-field md-mb-medium">
                        <input type="text" id="tituloTarea" class="md-text-field__input" placeholder=" " required>
                        <label for="tituloTarea" class="md-text-field__label">Título de la tarea</label>
                    </div>
                    <div class="md-text-field md-mb-medium">
                        <textarea id="descripcionTarea" class="md-text-field__input" rows="3"
                            placeholder=" "></textarea>
                        <label for="descripcionTarea" class="md-text-field__label">Descripción</label>
                    </div>
                    <div class="md-text-field md-mb-medium">
                        <input type="date" id="fechaTarea" class="md-text-field__input" required>
                        <label for="fechaTarea" class="md-text-field__label">Fecha límite</label>
                    </div>
                    <div class="md-text-field md-mb-medium">
                        <select id="prioridadTarea" class="md-text-field__input" required>
                            <option value="" disabled selected></option>
                            <option value="baja">Baja</option>
                            <option value="media">Media</option>
                            <option value="alta">Alta</option>
                        </select>
                        <label for="prioridadTarea" class="md-text-field__label">Prioridad</label>
                    </div>
                </form>
            </div>
            <div class="md-dialog__actions">
                <button class="md-button md-button--text" id="cerrarModalNuevaTarea">Cancelar</button>
                <button class="md-button md-button--filled" id="guardarNuevaTarea">Guardar</button>
            </div>
        </div>
    </div>

    <!-- Javascript -->
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            // UI Elements para Material Design
            const menuToggle = document.getElementById('menu-toggle');
            const navDrawer = document.getElementById('nav-drawer');
            const drawerOverlay = document.getElementById('drawer-overlay');
            const themeToggle = document.getElementById('theme-toggle');
            const agregarTareaBtn = document.getElementById('agregar-tarea');
            const grabarRapidoBtn = document.getElementById('grabar-rapido');

            const modalNuevaTareaContainer = document.getElementById('modalNuevaTareaContainer');
            const cerrarModalNuevaTarea = document.getElementById('cerrarModalNuevaTarea');
            const guardarNuevaTarea = document.getElementById('guardarNuevaTarea');

            // Toggle del menú lateral
            menuToggle.addEventListener('click', function () {
                navDrawer.classList.toggle('md-drawer--open');
                drawerOverlay.classList.toggle('md-drawer__overlay--open');
            });

            drawerOverlay.addEventListener('click', function () {
                navDrawer.classList.remove('md-drawer--open');
                drawerOverlay.classList.remove('md-drawer__overlay--open');
            });

            // Toggle del tema oscuro/claro
            themeToggle.addEventListener('click', function () {
                document.body.classList.toggle('dark-theme');
                const icon = themeToggle.querySelector('.material-icons');
                if (document.body.classList.contains('dark-theme')) {
                    icon.textContent = 'light_mode';
                } else {
                    icon.textContent = 'dark_mode';
                }
            });

            // Manejar pestañas de detalles
            document.querySelectorAll('.md-tab').forEach(tab => {
                tab.addEventListener('click', function () {
                    // Remover la clase activa de todas las pestañas
                    document.querySelectorAll('.md-tab').forEach(t => {
                        t.classList.remove('md-tab--active');
                    });

                    // Añadir la clase activa a la pestaña actual
                    this.classList.add('md-tab--active');

                    // Ocultar todos los contenidos
                    document.querySelectorAll('.tab-contenido').forEach(c => {
                        c.style.display = 'none';
                    });

                    // Mostrar el contenido correspondiente
                    const tabId = this.id;
                    const contenidoId = tabId.replace('tab-', 'contenido-');
                    document.getElementById(contenidoId).style.display = 'block';
                });
            });

            // Manejar selección de reuniones
            document.querySelectorAll('.reunionItem').forEach(item => {
                item.addEventListener('click', function () {
                    const reunionTitulo = this.getAttribute('data-reunion');
                    cargarDetalles(reunionTitulo);

                    // Marcar esta reunión como seleccionada
                    document.querySelectorAll('.reunionItem').forEach(ri => {
                        ri.classList.remove('md-list__item--active');
                    });
                    this.classList.add('md-list__item--active');
                });
            });

            // Función para cargar detalles de una reunión
            function cargarDetalles(titulo) {
                document.getElementById('titulo-reunion').textContent = titulo;

                // Aquí podrías cargar los datos reales desde una API
                if (titulo === 'Reunión de IA - 10/10/2023') {
                    document.getElementById('transcripcion').value = 'En esta reunión se discutió el algoritmo de Inteligencia Artificial para procesamiento de datos. Juan propuso utilizar una red neuronal para mejorar la clasificación, mientras que Ana sugirió implementar un sistema de aprendizaje por refuerzo. Al final del debate, se decidió combinar ambas técnicas para obtener mejores resultados.';
                    document.getElementById('resumen').value = 'Discusión sobre algoritmos de IA. Propuestas de redes neuronales y aprendizaje por refuerzo. Decisión final: implementar una solución híbrida.';
                    document.getElementById('puntos-clave').value = 'Puntos clave:\n- Algoritmos de IA para procesamiento de datos\n- Propuesta de red neuronal (Juan)\n- Propuesta de aprendizaje por refuerzo (Ana)\n- Solución híbrida elegida\n- Próxima reunión para evaluar resultados: 17/10/2023';
                } else if (titulo === 'Reunión de Optimización - 12/10/2023') {
                    document.getElementById('transcripcion').value = 'La reunión de optimización se centró en mejorar los tiempos de respuesta del sistema. Carlos identificó cuellos de botella en la capa de acceso a datos. María propuso implementar un sistema de caché para reducir consultas a la base de datos. Luis sugirió optimizar las consultas SQL existentes. Se acordó implementar todas las mejoras de forma gradual.';
                    document.getElementById('resumen').value = 'Análisis de optimización del sistema. Identificación de cuellos de botella en acceso a datos. Soluciones: sistema de caché y optimización de consultas SQL.';
                    document.getElementById('puntos-clave').value = 'Puntos clave:\n- Optimización de tiempos de respuesta\n- Cuellos de botella en acceso a datos\n- Implementación de sistema de caché\n- Optimización de consultas SQL\n- Plan de implementación gradual\n- Responsable: Carlos';
                }

                // Mostrar el contenido de transcripción por defecto
                document.getElementById('tab-transcripcion').click();
            }

            // Manejar envío de informe
            document.getElementById('enviar-informe').addEventListener('click', function () {
                mostrarSnackbar('Informe enviado correctamente por email');
            });

            // Manejar descarga de informe
            document.getElementById('descargar-informe').addEventListener('click', function () {
                mostrarSnackbar('Descargando informe...');
            });

            // Manejar grabación rápida
            grabarRapidoBtn.addEventListener('click', function () {
                mostrarSnackbar('Iniciando grabación rápida...');
            });

            // Manejar modal de nueva tarea
            agregarTareaBtn.addEventListener('click', function () {
                modalNuevaTareaContainer.classList.add('md-dialog-container--open');
            });

            cerrarModalNuevaTarea.addEventListener('click', function () {
                modalNuevaTareaContainer.classList.remove('md-dialog-container--open');
            });

            guardarNuevaTarea.addEventListener('click', function () {
                const tituloTarea = document.getElementById('tituloTarea').value;
                if (!tituloTarea) {
                    mostrarSnackbar('Por favor, ingrese un título para la tarea', true);
                    return;
                }

                // Aquí podrías guardar la tarea en una API

                // Limpiar formulario y cerrar modal
                document.getElementById('formNuevaTarea').reset();
                modalNuevaTareaContainer.classList.remove('md-dialog-container--open');

                // Mostrar confirmación
                mostrarSnackbar('Tarea creada correctamente');
            });

            // Función para mostrar snackbar
            function mostrarSnackbar(mensaje, esError = false) {
                // Eliminar snackbar existente si hay
                const snackbarExistente = document.querySelector('.md-snackbar');
                if (snackbarExistente) {
                    snackbarExistente.remove();
                }

                const snackbar = document.createElement('div');
                snackbar.classList.add('md-snackbar');
                snackbar.innerHTML = `
                    <div class="md-snackbar__text">${mensaje}</div>
                    <button class="md-snackbar__action">Cerrar</button>
                `;

                if (esError) {
                    snackbar.style.backgroundColor = 'var(--md-error)';
                }

                document.body.appendChild(snackbar);

                // Mostrar el snackbar
                setTimeout(() => {
                    snackbar.classList.add('md-snackbar--visible');
                }, 10);

                // Ocultar después de 4 segundos
                setTimeout(() => {
                    snackbar.classList.remove('md-snackbar--visible');
                    setTimeout(() => {
                        snackbar.remove();
                    }, 300);
                }, 4000);

                // Botón de cerrar
                snackbar.querySelector('.md-snackbar__action').addEventListener('click', function () {
                    snackbar.classList.remove('md-snackbar--visible');
                    setTimeout(() => {
                        snackbar.remove();
                    }, 300);
                });
            }
        });
    </script>
</body>

</html>